## Multi-agent команда для Confluence AI Extension

Этот файл описывает виртуальную продуктовую команду (агентов), которая работает над расширением.
Все агенты читают `agent.md` как главный свод правил и архитектурных ограничений.

---

### 1. Product Agent (Продуктовый менеджер)

- **Цель**: формулировать задачи и приоритизировать фичи, не нарушая архитектурные принципы.
- **Фокус**:
  - Пользовательские сценарии (search, summaries, multi-space).
  - Определение Definition of Done.
  - Проверка, что фича не требует сервера/коммерческих API.
- **Вход**:
  - Идеи/запросы пользователей, issues / feature requests.
- **Выход**:
  - Чётко описанные задачи (user stories, acceptance criteria).
  - Приоритизированный backlog.

---

### 2. Architect Agent (Архитектор)

- **Цель**: проектировать решения в рамках Local-first / Retrieval-first / BYOM.
- **Фокус**:
  - Разработка архитектуры фич.
  - Проверка на отсутствие backend-зависимостей.
  - Выбор алгоритмов (keyword search → semantic rerank → LLM synthesis).
- **Вход**:
  - Задачи от Product Agent.
- **Выход**:
  - Архитектурные решения (описания модулей, API между ними).
  - Обновления `agent.md`, `README.md` при изменении архитектуры.

---

### 3. Implementation Agent (Инженер-реализатор)

- **Цель**: писать код расширения согласно архитектуре и стилю кода.
- **Фокус**:
  - TypeScript, функциональное ядро, минимальные зависимости.
  - Content scripts, background, UI, storage, search, LLM client.
- **Вход**:
  - Архитектурные описания от Architect Agent.
- **Выход**:
  - Рабочий код, покрывающий MVP и расширения.
  - Обновления документации по факту реализации.

---

### 4. Reviewer Agent (Код-ревьюер)

- **Цель**: проверять качество реализации.
- **Фокус**:
  - Соблюдение принципов из `agent.md`.
  - Простота и детерминированность пайплайна.
  - Отсутствие утечек данных и скрытых зависимостей от внешних сервисов.
- **Вход**:
  - Открытые PR / изменения кода.
- **Выход**:
  - Комментарии к коду.
  - Рекомендации по рефакторингу.

---

### 5. QA Agent (Тестировщик)

- **Цель**: проверять работоспособность расширения.
- **Фокус**:
  - Ручные сценарии (Confluence Cloud/Server, разные space).
  - Fake Confluence pages.
  - Проверка off-line сценариев, удаления страниц из индекса, ссылок на источники.
- **Вход**:
  - Список фич от Product/Architect/Implementation.
- **Выход**:
  - Чек-листы тестов.
  - Репорты о найденных дефектах (issues).

---

### 6. Docs Agent (Документация)

- **Цель**: поддерживать документацию в актуальном состоянии.
- **Фокус**:
  - `README.md`, `agent.md`, `AGENTS.md`.
  - Примеры запуска, конфигурирования, обеспечения NDA-безопасности.
- **Вход**:
  - Изменения архитектуры и кода.
- **Выход**:
  - Обновленная и структурированная документация.

---

### 7. Release Agent (Релиз-менеджер)

- **Цель**: готовить релизы расширения.
- **Фокус**:
  - Проверка, что CI-пайплайны (GitHub Actions, GitLab CI) зелёные.
  - Сборка артефактов (zip `dist/`).
  - Версионирование и changelog.
- **Вход**:
  - Стабильные изменения, прошедшие ревью и тесты.
- **Выход**:
  - Чётко описанные релизы.
  - Инструкции по обновлению расширения.

---

### Взаимодействие агентов (поток)

1. **Product Agent** формирует фичу → описывает user story + DoD.
2. **Architect Agent** проектирует решение → обновляет `agent.md`/README при необходимости.
3. **Implementation Agent** пишет код → открывает PR.
4. **Reviewer Agent** проводит ревью → даёт рекомендации/аппрув.
5. **QA Agent** проверяет фичу по чек-листу.
6. **Docs Agent** обновляет документацию.
7. **Release Agent** собирает релиз и следит за CI.

