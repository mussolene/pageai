# Юзабилити и рекомендации по UI

Краткий обзор удобства использования расширения и рекомендации по улучшению.

---

## Что уже хорошо

- **Тема системы**: интерфейс следует `prefers-color-scheme` (светлая/тёмная тема ОС).
- **Один чат**: общая история в панели и popup, не нужно искать, где писал.
- **Парсинг по запросу**: страница парсится только при явном вопросе о ней — меньше лишних запросов и ожиданий.
- **Настройки в одном месте**: LLM и MCP в раскрывающемся блоке Settings, не загромождают чат.
---

## Рекомендации по юзабилити

### Высокий приоритет

1. **Подсказка в placeholder**  
   Явно подсказать, что можно спросить «про эту страницу» или задать общий вопрос, например:  
   *«Спросите о странице или задайте общий вопрос»* / *«Ask about this page or anything else»*.

2. **Состояние загрузки**  
   При отправке сообщения показывать индикатор (спиннер или «думаю…») в области сообщений, а не только отключать кнопку Send.

3. **Ошибки в интерфейсе**  
   Сообщения об ошибках (LLM недоступен, страница не загружена) показывать в чате как сообщение ассистента с короткой подсказкой (что проверить, куда зайти в настройках).

4. **Доступность (a11y)**  
   - У кнопки Send — `aria-label`.  
   - У textarea — `aria-label` или связанный `<label>`.  
   - Фокус при открытии панели: опционально ставить фокус в поле ввода.

### Средний приоритет

5. **Скролл к новому сообщению**  
   После появления ответа прокручивать список сообщений вниз (уже есть `scrollTop = scrollHeight` — проверить, что срабатывает после полной отрисовки).

6. **Очистка истории**  
   В настройках или под списком сообщений — кнопка «Очистить историю чата» с подтверждением.

7. **Краткая подсказка при первом открытии**  
   Один раз показать тултип/блок «Здесь чат. Можно спросить про эту страницу или задать общий вопрос», закрываемый по клику.

8. **Размер popup**  
   Фиксированная высота (например 500px) или запоминание размера, чтобы не «прыгал» при открытии.

### Низкий приоритет

9. **Группировка настроек**  
   Визуально разделить блок «LLM» и «MCP» (подзаголовки или отдельные `<details>`).

10. **Горячие клавиши**  
    Отправка по Enter (уже есть), опционально Ctrl+Enter для новой строки — описать в подсказке под полем ввода.

---

## Визуальный стиль (Material и тема системы)

- Тема **жёстко привязана к системной**: светлая/тёмная через `prefers-color-scheme`, без отдельного переключателя в расширении.
- Стиль **в духе Material**:
  - поверхности с лёгкой elevation (тень в светлой теме, приглушённое свечение в тёмной);
  - скругления 8px / 12px для карточек и полей;
  - один акцентный цвет для кнопок и ссылок;
  - плавные переходы для hover/focus.
- Контраст и размер шрифтов достаточны для чтения; кнопки и поля ввода имеют понятные области нажатия (минимум ~44px по высоте).

Реализация — в `panel.css` / `popup.css`: CSS-переменные для светлой и тёмной темы, общие для всего расширения.
